#pragma config(Sensor, S1,     UltrasonicSensor, sensorEV3_Ultrasonic)
#pragma config(Motor,  motorA,          Arm,           tmotorEV3_Medium, PIDControl, encoder)
#pragma config(Motor,  motorB,          LeftMotor,     tmotorEV3_Large, PIDControl, driveLeft, encoder)
#pragma config(Motor,  motorC,          RightMotor,    tmotorEV3_Large, PIDControl, driveRight, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

int MaxDistance = 30;
int MinDistance = 5;
bool boolTurnedRight = false;
bool boolTurnedLeft = false;
bool boolTurnedFront = true;
int intLeftDistance = 0;
int intRightDistance = 0;
int intFrontDistance = 0;

void ResetAllMotorEncoders()
{
	resetMotorEncoder(Arm);
	resetMotorEncoder(LeftMotor);
	resetMotorEncoder(RightMotor);
}

void ResetSensorLocation()
{
	motor[Arm] = -50;
	sleep(1000);
	motor[Arm] = 0;
	ResetAllMotorEncoders();
	displayBigTextLine(10, "Let's face front!");
	setMotorTarget(Arm, 105, 15);
	while(getMotorRunning(Arm))
	{
		//do nothing
	}
}

void TurnSensorLeft()
{
	motor[Arm] = -50;
	sleep(1000);
	motor[Arm] = 0;
	ResetAllMotorEncoders();
}

void TurnSensorRight()
{
	motor[Arm] = 50;
	sleep(1000);
	motor[Arm] = 0;
	ResetAllMotorEncoders();
}

void TurnSensorFront()
{
	ResetSensorLocation();
}

void GetLeftDistance()
{
	TurnSensorLeft();
	intLeftDistance = getUSDistance(UltrasonicSensor);
}

void GetRightDistance()
{
	TurnSensorRight();
	intRightDistance = getUSDistance(UltrasonicSensor);
}

void GetFrontDistance()
{
	TurnSensorFront();
	intFrontDistance = getUSDistance(UltrasonicSensor);
}

void GetDistances()
{
	GetLeftDistance();
	displayBigTextLine(2, "%d", intLeftDistance);
	GetRightDistance();
	displayBigTextLine(4, "%d", intRightDistance);
	GetFrontDistance();
	displayBigTextLine(6, "%d", intFrontDistance);
}

task main()
{
	ResetSensorLocation();
	while(true)
	{
		ResetAllMotorEncoders();
		GetDistances();
		if(intLeftDistance < MaxDistance && intLeftDistance > MinDistance)
		{
			sleep(5000);
			setMotorSyncEncoder(LeftMotor, RightMotor, 0, 360, 60);
		}
	}
}
