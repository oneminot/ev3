#pragma config(Sensor, S1,     UltrasonicSensor, sensorEV3_Ultrasonic)
#pragma config(Motor,  motorA,          Arm,           tmotorEV3_Medium, PIDControl, encoder)
#pragma config(Motor,  motorB,          LeftMotor,     tmotorEV3_Large, PIDControl, driveLeft, encoder)
#pragma config(Motor,  motorC,          RightMotor,    tmotorEV3_Large, PIDControl, driveRight, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

int MaxDistance = 30;
bool boolTurnedRight = false;
bool boolTurnedLeft = false;
bool boolTurnedFront = true;

void ResetAllMotorEncoders()
{
	resetMotorEncoder(Arm);
	resetMotorEncoder(LeftMotor);
	resetMotorEncoder(RightMotor);
}

int GetSensorReading()
{
	if(boolTurnedFront && !boolTurnedLeft && !boolTurnedRight)
		{
			setMotorTarget(Arm, -90, 15);
			return -1;
		}
		else if(!boolTurnedFront && boolTurnedLeft && !boolTurnedRight)
		{
			setMotorTarget(Arm, +90, 15);
			return 0;
		}
		else if(boolTurnedFront && !boolTurnedLeft && !boolTurnedRight)
		{
			setMotorTarget(Arm, +90, 15);
			return +1;
		}
		return -2;
}

task main()
{
	while(true)
	{
		ResetAllMotorEncoders();
		GetSensorReading();
		if(getUSDistance(UltrasonicSensor) < MaxDistance)
		{
			setMotorSyncEncoder(LeftMotor, RightMotor, 0, 360, 60);
		}
	}
}
